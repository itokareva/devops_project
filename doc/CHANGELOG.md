## Журнал работ

17.10.2020 - начало работ. Написаны docker-файлы. Собраны образы. 

18.10.2020 - Написаны манифесы для развертывания в k8s. Попытка сразу все развернуть в GKE была неудачной

19.10.2020 - написан docker-compose.yml. Попытка развернуть локально - неудачная. Приложение не могло авторизоваться в rabbitmq

20.10.2020 - найдена причина отсутствия коннекта. Приложение стартовало раньше, чем поднималась rabbitmq.
             Все заработалол после добавления блока:

```depends_on:
      crawler_db:
        condition: service_started
      rabbitmq:
        condition: service_healthy``` 
        
24.10.2020 - написание кода инфраструктыры для развертывания k8s- кластера

25.10.2020 - написание кода инфраструктуры для запуска 4 компонентов приложения: rabbinmq, mongodb, srawler_engine, crawler_ui 
             через terraform, provider helm. Была проблема: обе компоненты приложения не видели БД. 
             
26.10.2020 - поиски причин отсутствия сетевой связанности. Ошибка была в именовании сервиса mongodb. Неправильно был описан в переменных окружения 
             в приложении
             
28.10.2020 - развертывание gitlab omnibus. Были проблемы: в версии 1.16 GKE не поднимался, так как в 1.16 extensions/v1beta1 стала deprecated.
             Пришлось опустить версию k8s до 1.14 и скрипты terraform переделать под эту версию.   
             
30.10.2020 - отлатка stage unittest. Были проблемы с версией питона. Требовался питон версии не выше 3.6 из-за того что ключевое слово, используемое в 
             коде unit-теста стало в версии питона 3.6. - зарезервированным. В образе dind поставить такую версию не получилось. 
             Выбран образ docker
             
31.10.2020 - отладка stage review и cleanup сборочного пайплайна 

01.11.2020 - развертывание prometheus, grafana, создание дашбордов для графаны

03.11.2020 - отладка pipeline для деплоя staging и production окружений

06.11.2020 - настройка графаны так, чтобы datasource и dashboards были уже предопределены при новом развертывании графаны
             развертывание alertmanager. Настроены правила на alert: InstanceDown и настроена нотификация в слаке, но не "не взлетает" 
             один из двух контейнеров в поде. Не удлось победить.
             
07.11.2020 - отладка cleanup. Были проблемы с обработкой параметров в helm2 с тиллером. В helm3 таких проблем не было но новый докер не видел
             релиз, пока ему явно не был указан namespace
             
08.11.2020 - запись скринкастов, размещение их на yandex disk 

09.11.2020 - написание README.MD

10.11.2020 - описание архиектуры приложения. How_to_start.md

11.11.2020 - How_to_start.md 
